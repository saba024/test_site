(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[589],{35221:(e,t,i)=>{"use strict";var n;function s(e){const t=new Date;t.setHours(0,0,0,0),e.setHours(0,0,0,0);const i=(t.getTime()-e.getTime())/864e5;if(0===i)return n.TODAY;if(1===i)return n.YESTERDAY;if(i<7)return n.THIS_WEEK;const s=Math.floor(i/7);return 1===s?n.ONE_WEEK_AGO:2===s?n.TWO_WEEKS_AGO:3===s?n.THREE_WEEKS_AGO:n.OLDER}i.d(t,{Z:()=>n,f:()=>s}),function(e){e.TODAY="TODAY",e.YESTERDAY="YESTERDAY",e.THIS_WEEK="THIS_WEEK",e.ONE_WEEK_AGO="ONE_WEEK_AGO",e.TWO_WEEKS_AGO="TWO_WEEKS_AGO",e.THREE_WEEKS_AGO="THREE_WEEKS_AGO",e.OLDER="OLDER"}(n||(n={}))},13310:(e,t,i)=>{"use strict";i.d(t,{Y:()=>a});var n=i(89557),s=i(67992);class a extends s.V{constructor(){super(),this.name="cursor",this.opacity=new n.z(0),this.texture=null}}},85042:(e,t,i)=>{"use strict";var n;i.d(t,{L:()=>n}),function(e){e[e.Reticle=0]="Reticle",e[e.GridPlane=1]="GridPlane"}(n||(n={}))},56843:(e,t,i)=>{"use strict";i.d(t,{J:()=>p});var n=i(85893),s=i(67294),a=i(94184),r=i.n(a),o=i(76631),c=i(40216),l=i(61531),d=i(31362),u=i(40505),h=i(97593),f=i(44523);const p=(0,s.forwardRef)((({children:e,open:t,className:i,onClose:a,scrollingDisabled:p=!1},m)=>{const v=(0,s.useRef)(null),g=(0,s.useRef)(null),S=(0,s.useMemo)((()=>(0,d.Jm)()),[]),x=(0,c.T)(),[E,y]=(0,s.useState)(!1),k=(0,f.O)();(0,l.U)(u.SN,(e=>{y(e.focused)})),(0,s.useImperativeHandle)(m,(()=>({resetScrollTop:()=>{g.current&&g.current.resetScrollTop()},scrollToSelector:e=>{g.current&&g.current.scrollToSelector(e)}})),[g]);const b=x===o.wS.BOTTOM_PANEL,T=S&&E&&b,A=T&&!function(){var e;if(!g.current)return!1;const t=g.current.getScrollHeight(),i=(null===(e=g.current.getScroller())||void 0===e?void 0:e.getBoundingClientRect().top)||0;return t<=k.height-i}(),w=b,C={open:t,"sticky-header":!T,"detail-panel-align-top":A};return(0,n.jsx)("div",Object.assign({className:r()("detail-panel",C,i),onKeyDown:function(e){a&&"Escape"===e.code&&(e.stopPropagation(),a())},ref:v,tabIndex:t?0:void 0,onTransitionEnd:e=>{v.current&&e.target===v.current&&t&&v.current.focus()}},{children:(0,n.jsx)(h.T,Object.assign({ref:g,hideThumb:w,disabled:p},{children:e}))}))}))},6608:(e,t,i)=>{"use strict";i.d(t,{C:()=>l});var n=i(85893),s=i(67294),a=i(38772),r=i(94184),o=i.n(r),c=function(e,t,i,n){var s,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let l=class extends s.Component{constructor(e){super(e)}render(){const{iconClass:e,label:t,badgeStyle:i,onClick:s,className:a,imageUrl:r}=this.props;return(0,n.jsxs)("span",Object.assign({className:o()("badge",a,{clickable:!!s}),style:i,onClick:s},{children:[e&&(0,n.jsx)("span",{className:`icon badge-icon ${e}`}),t&&(0,n.jsx)("span",Object.assign({className:"badge-label"},{children:t})),r&&(0,n.jsx)("span",Object.assign({className:"badge-img"},{children:(0,n.jsx)("img",{src:r})}))]}))}};l=c([a.Z],l)},44472:(e,t,i)=>{"use strict";i.d(t,{S:()=>p});var n=i(85893),s=i(94184),a=i.n(s),r=i(95160),o=i(52528),c=i(67294);function l(e){const{text:t,keyPrefix:i,markers:s}=e,[a,r]=s,o=[];let l=t,d=l.search(`${a}|${r}`),u=l.search(a);for(;d>-1;){const e=d===u,s=l.slice(0,d),h=t.length-l.length,f=`${i},${h}-${h+d}`;e?o.push((0,n.jsx)(c.Fragment,{children:s},f)):o.push((0,n.jsx)("span",Object.assign({"data-blocktype":"marker"},{children:s}),f)),l=l.slice(d+(e?a.length:r.length),l.length),d=l.search(`${a}|${r}`),u=l.search(a)}if(l.length){const e=`${i},${t.length-l.length}-${t.length}`;o.push((0,n.jsx)(c.Fragment,{children:l},e))}return 0===o.length?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{children:o})}function d(e){const{block:t,children:i,onClick:s}=e;return s?(0,n.jsx)("a",Object.assign({className:`link-annotation ${o.o.USER}`,onClick:s,"data-id":t.id||void 0,"data-value":t.value||void 0,"data-blocktype":t.blockType},{children:i})):(0,n.jsx)("span",Object.assign({"data-blocktype":t.blockType},{children:i}))}function u(e){const{block:t,children:i,onClick:s}=e;return s?(0,n.jsx)("a",Object.assign({className:`link-annotation ${o.o.USER}`,onClick:s,"data-blocktype":t.blockType},{children:i})):(0,n.jsx)("span",Object.assign({"data-blocktype":t.blockType},{children:i}))}function h(e){const{block:t,children:i,linksActive:s,onClick:a}=e;return a||s?(0,n.jsx)("a",Object.assign({href:`${t.value}`,target:"_blank",className:`link-annotation ${o.o.LINK}`,onClick:a,"data-blocktype":t.blockType,"data-value":t.value},{children:i})):(0,n.jsx)("span",Object.assign({"data-blocktype":t.blockType,"data-value":t.value},{children:i}))}function f(e){const{block:t,keyPrefix:i,markers:s}=e,{blockType:a,text:o}=t,c=s?(0,n.jsx)(l,{keyPrefix:i,text:o,markers:s}):(0,n.jsx)(n.Fragment,{children:o});return a===r.C.USER?(0,n.jsx)(d,Object.assign({},e,{children:c})):a===r.C.HASH?(0,n.jsx)(u,Object.assign({},e,{children:c})):a===r.C.LINK&&t.value?(0,n.jsx)(h,Object.assign({},e,{children:c})):c}function p(e){const t=e.textParser.parse(e.text),i=a()("text-box-text",e.className);return(0,n.jsx)("div",Object.assign({className:i},{children:t.map(((t,i)=>(0,n.jsx)(f,{keyPrefix:`${t.blockType}${i}`,block:t,linksActive:!!e.linksActive,onClick:e.onClick,markers:e.markers},`${t.blockType}${i}`)))}))}},52528:(e,t,i)=>{"use strict";i.d(t,{o:()=>n,v:()=>r});var n,s=i(95160),a=i(31362);!function(e){e.TEXT="",e.LINK="link-url",e.HASH="link-hashtag",e.USER="link-user"}(n||(n={}));class r{constructor(e){this.serialize=e=>{const t=[],i=[].slice.call(e.childNodes);for(const e of i)switch(e.nodeName){case"#text":t.push(this.serializeText(e));break;case"A":t.push(this.serializeAnchor(e));break;case"P":case"DIV":t.push(this.serializeElement(e,!0));break;case"SPAN":t.push(this.serializeElement(e,!1));break;case"BR":break;default:t.push(this.serialize(e))}return t.join("")},this.deserialize=(e,t,i,n=this.markers)=>{const s=this.parse(e).map((e=>this.createNode(e,t,i)));return n?this.parseMarkers(s,n):s},this.serializeText=e=>{let t=this.sanitizeText(e.textContent||"");if(this.links){const e=new RegExp(/https?:\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?/gi),i=document.createElement("a");t=t.replace(e,(e=>(i.href=e,`[${e}](${i.href})`))),i.remove()}return this.hashtags&&(t=t.replace(/(#\w*)/,(e=>`[${e}]`))),t.replace(/\<\s*br\s*\/?>/gi,"\n")},this.serializeAnchor=e=>{const t=e.dataset.blocktype,i=this.sanitizeText(e.innerText||e.textContent||"");let n=i;switch(t){case s.C.HASH:n=`[${i}]`;break;case s.C.USER:if(this.users){let t=e.dataset.id||"",i=e.dataset.value||"";if(!t&&!i&&(i="@"===n[0]?n.substr(1):n,i)){const e=this.users.getUserInfoByEmail(i);e&&(t=e.id)}(t||this.validateEmail(i))&&(n=`[@${t}](${i})`)}break;case s.C.LINK:const t=e.dataset.value||e.href;t&&(n=`[${i}](${t})`);break;default:e.href&&(n=`[${i}](${e.href})`)}return n},this.serializeElement=(e,t)=>{let i=t?"\n":" ";return e.childNodes.length>0&&(i+=this.serialize(e)),i},this.validateEmail=(()=>{const e=/\S+@\S+\.\S+/,t=document.createElement("input");return t.type="email",t.required=!0,i=>(t.value=i,"function"==typeof t.checkValidity?t.checkValidity():e.test(i))})();const{links:t,hashtags:i,users:n,markers:a}=e;this.links=t||!1,this.hashtags=i||!1,this.users=n,this.markers=a}parseMarkers(e,t){const[i,n]=t;let s=!1;const a=new RegExp(i+"|"+n);for(let t=0;t<e.length;t++){const i=e[t],{nodeType:n,textContent:r}=i,o=3===n;if(!r)continue;o?e.splice(t,1):i.textContent=null;const c=r.split(a);c.forEach(((n,a)=>{if(""!==n){let a;if(s){const e=document.createElement("span");e.setAttribute("data-blocktype","marker"),a=e,a.textContent=n}else a=document.createTextNode(n);o?e.splice(t++,0,a):i.appendChild(a)}a<c.length-1&&(s=!s)})),o&&t--}return e}createNode(e,t,i){switch(e.blockType){case s.C.USER:const a=document.createElement(i?"a":"span");if(a.setAttribute("data-blocktype",e.blockType),i){const t=a;t.className=`link-annotation ${n.USER}`,t.removeAttribute("href"),i&&(t.onclick=i);const s=e.id||"",r=e.value||"";s&&t.setAttribute("data-id",s),r&&t.setAttribute("data-value",r)}return a.textContent=`${e.text}`,a;case s.C.HASH:const r=document.createElement(i?"a":"span");if(r.setAttribute("data-blocktype",e.blockType),i){const e=r;e.className=`link-annotation ${n.HASH}`,e.removeAttribute("href"),i&&(e.onclick=i)}return r.textContent=`${e.text}`,r;case s.C.LINK:if(e.value){const s=document.createElement(i||t?"a":"span");if(s.setAttribute("data-blocktype",e.blockType),s.setAttribute("data-value",e.value),i||t){const a=s;t&&(a.href=`${e.value}`),a.target="_blank",a.className=`link-annotation ${n.LINK}`,i&&(a.onclick=i)}return s.textContent=`${e.text}`,s}}return document.createTextNode(""+e.text)}parse(e){const t=[];if(!e)return[];const i=e.split("[").map(((e,t)=>0===t?e:"["+e));let n=0;for(;n<i.length;){const e=this.parseIntoBlocks(i[n],t);e&&i.splice(n+1,0,e),n++}return t}getPlainText(e){return this.parse(e).map((e=>e.text)).join("")}searchMarkdown(e,t){let i=-1,n=0,s=0;const a=this.parse(e).map((e=>{let a;return this.matchTextBlock(e,t)?(s++,-1===i&&(i=n),a=e.markdown):a=e.text,n+=e.text.length,a}));return-1===i?null:{markdown:a.join(""),matchIndex:i,textLength:n,numMatches:s}}getUserMentions(e){return this.parse(e).filter((e=>e.blockType===s.C.USER&&e.value)).map((e=>e.value||""))}matchTextBlock(e,t){if(e.blockType===t.blockType)if(e.blockType===s.C.USER){if(e.id===t.id)return!0;if(e.value===t.value)return!0}else if(e.blockType===s.C.HASH)return e.text===t.text;return!1}parseIntoBlocks(e,t){if(this.users){const i=this.getUserBlock(e);if(i)return t.push(i),e.slice(i.markdown.length)}if(this.links){const i=this.getLinkBlock(e);if(i&&i.value&&-1===i.value.indexOf("javascript:"))return t.push(i),e.slice(i.markdown.length)}if(this.hashtags){const i=this.getHashBlock(e);if(i)return t.push(i),e.slice(i.markdown.length)}const i=this.getTextBlock(e);return i&&t.push(i),null}getTextBlock(e){return 0===e.length?null:{blockType:s.C.TEXT,text:e,markdown:e}}getHashBlock(e){const t=e.match(r.hashRegex);return!t||t.length<2?null:{blockType:s.C.HASH,markdown:t[0],text:t[1]}}getUserBlock(e){if(!this.users)return null;const t=e.match(r.userRegex);if(!t||t.length<3)return null;let i=t[1].substr(1),n=t[2];const a=n?this.users.getUserInfoByEmail(n):this.users.getUserInfoById(i),o=a?a.name:"";return i=a?a.id:i,n=a?a.email:n,{blockType:s.C.USER,markdown:t[0],id:i,value:n,text:`@${o||n}`}}getLinkBlock(e){const t=e.match(r.linkRegEx);if(!t)return null;const i=t[2];let n=1,a=0;for(;a<i.length&&("("===i[a]?n++:")"===i[a]&&n--,0!==n);)a++;const o=i.length-a;let c=this.conditionallyEncode(t[2].substring(0,a));return-1===c.indexOf("://")&&(c="http://"+c),{blockType:s.C.LINK,markdown:t[0].substring(0,t[0].length-o),text:t[1],value:c}}conditionallyEncode(e){const t=e.trim();return this.needsEncoding(t)?encodeURI(t):t}needsEncoding(e){if(e.match(a.jx))return!0;let t=e;try{t=decodeURI(e)}catch(e){}return!1}sanitizeText(e){return e.replace(/\]\(/g,"]&zwnj;(").replace(/[\u200B]/g,"").replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')}}r.hashRegex=/\[(#(\w|-)*)\]/,r.userRegex=/\[(@\w*)\]\(([^\)\(\[\]]*)\)/,r.linkRegEx=/\[([^\]]*)\]\((.*)\)/},23454:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r});var n=i(81396),s=i(10840),a=i(66990);class r extends n.RawShaderMaterial{constructor(e,t,i,r=a.V9.lineSelected){super(),this.parameters=e,this.hoverTexture=t,this.defaultTexture=i,this.selectedWidth=r,this.type="LineMaterial",this.isLineMaterial=!0,this.defaultWidth=a.V9.lineDefault,this.setValues({uniforms:n.UniformsUtils.clone(s.T.line.uniforms),vertexShader:s.T.line.vertexShader,fragmentShader:s.T.line.fragmentShader,transparent:!0,depthWrite:!1,depthTest:!0,opacity:1}),this.setValues(e),i&&(this.mask=i),this.defaultWidth=e&&e.linewidth?e.linewidth:a.V9.lineDefault}updateSelected(e){const t=e?this.hoverTexture:this.defaultTexture;t&&this.mask!==t&&(this.mask=t,e?this.setLinewidth(this.selectedWidth):this.setLinewidth(this.defaultWidth))}setLinewidth(e){this.uniforms.linewidth||(this.uniforms=n.UniformsUtils.clone(s.T.line.uniforms)),this.getLinewidth()!==e&&(this.uniforms.linewidth.value=e)}getLinewidth(){return this.uniforms.linewidth.value}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}getOpacity(){return this.uniforms.opacity.value}setOpacity(e){this.uniforms||(this.uniforms=n.UniformsUtils.clone(s.T.line.uniforms)),this.getOpacity()!==e&&(this.uniforms.opacity.value=e)}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}set dashed(e){e?this.defines.USE_DASH="":delete this.defines.USE_DASH,this.needsUpdate=!0}get dashed(){return"USE_DASH"in this.defines}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value=e}set mask(e){this.uniforms.mask.value!==e&&(e?this.defines.USE_MASK="":delete this.defines.USE_MASK,this.uniforms.mask.value=e,this.needsUpdate=!0)}get mask(){return this.uniforms.mask.value}copy(e){return n.RawShaderMaterial.prototype.copy.call(this,e),this.parameters=e.parameters,this.color.copy(e.color),this.defaultWidth=e.defaultWidth,this.setLinewidth(e.getLinewidth()),this.resolution.copy(e.resolution),this.defaultTexture=e.defaultTexture,this.hoverTexture=e.hoverTexture,this.mask=e.mask,this.setOpacity(e.getOpacity()),this.dashed=e.dashed,this.dashScale=e.dashScale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}},10840:(e,t,i)=>{"use strict";i.d(t,{T:()=>m});var n=i(81396),s=i(11677),a=i(44724),r=i.n(a),o=i(7188),c=i.n(o),l=i(52059),d=i.n(l),u=i(75215),h=i.n(u),f=i(56449),p=i.n(f);const m={endpoint:{uniforms:{opacity:{type:"f",value:1},color:{type:"c",value:new n.Color},bg:{type:"t",value:null}},vertexShader:s.Z.basicTextured.vertexShader,fragmentShader:r()},line:{uniforms:n.UniformsUtils.merge([n.UniformsLib.common,n.UniformsLib.fog,{linewidth:{value:4},resolution:{value:new n.Vector2(0,0)},dashScale:{value:1},dashSize:{value:.025},gapSize:{value:.05},mask:{value:null}}]),vertexShader:c(),fragmentShader:d()},screenline:{uniforms:{lineWidth:{value:1},screenSize:{value:new n.Vector2(0,0)},dashed:{value:0},dashSize:{value:1},gapSize:{value:1},antialiasWidth:{value:1},color:{value:new n.Color(1,0,0)},opacity:{value:1},start:{value:new n.Vector3},end:{value:new n.Vector3}},vertexShader:h(),fragmentShader:p()}}},66990:(e,t,i)=>{"use strict";i.d(t,{Ey:()=>a,V9:()=>s,g4:()=>r,iV:()=>n});const n={FADE_DURATION:100,LABEL_HIDDEN_OPACITY:.15,DEPTH_WRITE_THRESHOD:.15,ALIGN_LABELS:!1,LABEL_SIZING:.14,LABEL_NDC_SCALEFACTOR:.5,LABEL_ASPECT_SCALEFACTOR:.035,OFFSET_TOWARDS_CAMERA:.25,HIDE_LABELS:!1},s={dottedLineDefault:2,lineDefault:6,lineSelected:6,endpointDefault:2.5,endpointSelected:3.75},a=.01,r=5},57370:(e,t,i)=>{"use strict";i.d(t,{q:()=>r});var n=i(67294),s=i(1358);function a(e){return e?Array.from(e.rooms.values()):[]}function r(){const e=(0,s.S)(),[t,i]=(0,n.useState)(a(e));return(0,n.useEffect)((()=>{if(!e)return()=>{};const t=()=>i(a(e)),n=e.onRoomsChanged({onRemoved:e=>t,onUpdated:e=>t,onChildUpdated:e=>t,onAdded:e=>t});return t(),()=>{n.cancel()}}),[e]),t}},1358:(e,t,i)=>{"use strict";i.d(t,{S:()=>a});var n=i(45755),s=i(94304);const a=(0,n.u)(s.Z)},56163:(e,t,i)=>{"use strict";i.d(t,{K:()=>o});var n=i(52528),s=i(71166),a=i(63319);const r=new n.v({});class o{constructor(e,t,i){this.commandBinder=e,this.layersData=t,this.dataTypeGroup=i,this.textParser=r,this.enabled=!0,this.bindings=[]}getGroupingId(e){switch(e){case a.HH.TYPE:return this.getTypeId();case a.HH.FLOOR:return this.getFloorId();case a.HH.ROOM:return this.getRoomId();case a.HH.LAYER:return this.getLayerGroupId();case a.HH.DATE:return this.dateBucket}}getFloorId(){return this.floorId}getRoomId(){return this.roomId}getDateBucket(){return this.dateBucket}getTypeId(){return this.typeId}supportsBatchDelete(){return!1}supportsLayeredCopyMove(){return!1}getLayerGroupId(){var e,t;const i=null===(e=this.layersData)||void 0===e?void 0:e.getBaseLayerId(),n=null===(t=this.layersData)||void 0===t?void 0:t.getViewLayerId();return this.layerId&&n&&this.layerId===i?n:this.layerId}isLayerVisible(){return!this.layersData||!this.layerId||this.layersData.layerVisible(this.layerId)}onSelect(e,t,i){this.commandBinder.issueCommand(new s.IL(this.id,this.typeId))}registerBindings(){}cancelBindings(){this.bindings.forEach((e=>e.cancel()))}}},71166:(e,t,i)=>{"use strict";i.d(t,{FZ:()=>a,H1:()=>s,Hf:()=>c,IL:()=>d,M8:()=>r,Mp:()=>l,Pe:()=>h,SN:()=>o,c6:()=>u});var n=i(19663);class s extends n.m{constructor(e){super(),this.id="UPDATE_SEARCH_QUERY",this.payload={query:e}}}class a extends n.m{constructor(e){super(),this.id="UPDATE_SEARCH_QUERY_KEYWORDS",this.payload={keywords:e}}}class r extends n.m{constructor(e){super(),this.id="TOGGLE_SEARCH_QUERY_KEYWORD",this.payload={keywordId:e}}}class o extends n.m{constructor(e){super(),this.id="CHANGE_SEARCH_GROUPING",this.payload={grouping:e}}}class c extends n.m{constructor(){super(),this.id="SEARCH_FILTER_CLEAR"}}class l extends n.m{constructor(e,t){super(),this.id="SEARCH_FILTER_TOGGLE",this.payload={groupId:e,enabled:t}}}class d extends n.m{constructor(e,t){super(),this.id="SELECT_SEARCH_RESULT",this.payload={id:e,typeId:t}}}class u extends n.m{constructor(e){super(),this.payload=e,this.id="SEARCH_GROUP_REGISTER"}}class h extends n.m{constructor(e){super(),this.id="SEARCH_GROUP_DEREGISTER",this.payload={id:e}}}},60543:(e,t,i)=>{"use strict";i.d(t,{PP:()=>n,vr:()=>r,zf:()=>o});const n=["<mark>","</mark>"];function s(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function a(e,t){const[i,a]=n,r=`${i}|${a}`;let o=!1;if(e.match(new RegExp(r))&&(e=e.replace(new RegExp(`(${r})`,"g"),((e,t)=>t.split("").join("‌"))),o=!0),t){let n;n=o?t.split("").map(s).join("[‌]?"):s(t),e=e.replace(new RegExp(`(${n})`,"gi"),((e,t)=>`${i}${t}${a}`))}return e}const r=a;function o(e,t){return a(function(e,t){var i;const n=e.toLowerCase(),[a,r,o]=[n.indexOf(t),e.length,(null===(i=n.match(new RegExp(`${s(t)}`,"g")))||void 0===i?void 0:i.length)||1];let c=e,l=a;if(r>20&&l>0){if(1===o){const e=Math.floor((20-t.length)/2);e>0&&l>e&&(l-=e)}c=`...${c.substr(l)}`,c.length<20&&(l-=20-c.length,l>0&&(c=`...${e.substr(l)}`))}return c}(e,t),t)}},77230:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(73085),s=i(29883);const a=(0,n.M)(s.T,"query","")},65428:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(73085),s=i(91380);const a=(0,n.M)(s.t,"previousToolName",null)},44724:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform float opacity;uniform vec3 color;uniform sampler2D bg;varying vec2 vUv;void main(){vec4 bgColor=texture2D(bg,vUv);gl_FragColor=vec4(bgColor.rgb,bgColor.a*opacity);}"},52059:e=>{e.exports="precision highp float;precision highp int;uniform mat4 viewMatrix;uniform vec3 cameraPosition;uniform vec3 diffuse;uniform float opacity;uniform sampler2D mask;\n#ifdef USE_DASH\nuniform float dashSize;uniform float gapSize;\n#endif\nvarying float vLineDistance;\n#include <common>\nvarying vec2 vUv;void main(){\n#ifdef USE_DASH\nif(vUv.y<-1.||vUv.y>1.)discard;if(mod(vLineDistance,dashSize+gapSize)>dashSize)discard;\n#endif\n#ifdef USE_MASK\nvec2 modUv=vec2(vUv);modUv*=2.;vec4 texelColor=texture2D(mask,modUv);gl_FragColor=vec4(texelColor.rgb,min(texelColor.a,opacity));\n#else\ngl_FragColor=vec4(diffuse,opacity);\n#endif\n}"},7188:e=>{e.exports="precision highp float;precision highp int;uniform mat4 modelMatrix;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;uniform mat4 viewMatrix;uniform mat3 normalMatrix;uniform vec3 cameraPosition;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;\n#include <common>\nuniform float linewidth;uniform vec2 resolution;attribute vec3 instanceStart;attribute vec3 instanceEnd;attribute vec3 instanceColorStart;attribute vec3 instanceColorEnd;varying vec2 vUv;\n#ifdef USE_DASH\nuniform float dashScale;attribute float instanceDistanceStart;attribute float instanceDistanceEnd;varying float vLineDistance;\n#endif\nvoid trimSegment(const in vec4 start,inout vec4 end){float a=projectionMatrix[2][2];float b=projectionMatrix[3][2];float nearEstimate=-0.5*b/a;float alpha=(nearEstimate-start.z)/(end.z-start.z);end.xyz=mix(start.xyz,end.xyz,alpha);}void main(){\n#ifdef USE_COLOR\nvColor.xyz=(position.y<0.5)?instanceColorStart:instanceColorEnd;\n#endif\n#ifdef USE_DASH\nvLineDistance=(position.y<0.5)?dashScale*instanceDistanceStart:dashScale*instanceDistanceEnd;\n#endif\nfloat aspect=resolution.x/resolution.y;vUv=uv;vec4 start=modelViewMatrix*vec4(instanceStart,1.);vec4 end=modelViewMatrix*vec4(instanceEnd,1.);bool perspective=(projectionMatrix[2][3]==-1.);if(perspective){if(start.z<0.&&end.z>=0.){trimSegment(start,end);}else if(end.z<0.&&start.z>=0.){trimSegment(end,start);}}vec4 clipStart=projectionMatrix*start;vec4 clipEnd=projectionMatrix*end;vec2 ndcStart=clipStart.xy/clipStart.w;vec2 ndcEnd=clipEnd.xy/clipEnd.w;vec2 dir=ndcEnd-ndcStart;dir.x*=aspect;dir=normalize(dir);vec2 offset=vec2(dir.y,-dir.x);dir.x/=aspect;offset.x/=aspect;if(position.x<0.)offset*=-1.;offset*=linewidth;offset/=resolution.y;vec4 clip=(position.y<0.5)?clipStart:clipEnd;\n#ifdef USE_MASK\noffset*=(clipEnd.w+clipStart.w)*0.5;\n#else\noffset*=clip.w;\n#endif\nclip.xy+=offset;gl_Position=clip;\n#include <worldpos_vertex>\n}"},56449:e=>{e.exports="precision highp float;uniform vec3 color;uniform float antialiasWidth;uniform float lineWidth;uniform float dashed;uniform float dashSize;uniform float gapSize;uniform float opacity;varying float vDistanceFromAxis;varying float vDistanceAlong;void main(){float halfWidth=lineWidth*0.5;float antialiasing=1.-smoothstep(halfWidth,halfWidth+antialiasWidth,vDistanceFromAxis);float dashOpacity=1.;if(dashed>0.){\n#ifdef WORLDSPACE_DASH\nfloat dashAA=fwidth(vDistanceAlong)*antialiasWidth*0.5;\n#else\nfloat dashAA=antialiasWidth*0.5;\n#endif\nfloat dashT=mod(vDistanceAlong,dashSize+gapSize);dashOpacity=smoothstep(0.,dashAA,dashT)*(1.-smoothstep(dashSize-dashAA,dashSize,dashT));}gl_FragColor=vec4(color,opacity*dashOpacity*antialiasing);}"},75215:e=>{e.exports="precision highp float;uniform vec2 screenSize;vec2 rotate90(vec2 v){return vec2(-v.y,v.x);}vec2 ndcToScreen(vec4 pt){return pt.xy*screenSize/2.;}vec2 screenToNdc(vec2 pt){return pt*2./screenSize;}uniform vec3 start;uniform vec3 end;uniform float lineWidth;uniform float antialiasWidth;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;attribute float offsetDirection;attribute float t;varying float vDistanceFromAxis;varying float vDistanceAlong;void main(){vec4 startNdc=projectionMatrix*modelViewMatrix*vec4(start,1.);vec4 endNdc=projectionMatrix*modelViewMatrix*vec4(end,1.);float z=mix(startNdc.z,endNdc.z,t);float w=mix(startNdc.w,endNdc.w,t);vec2 startScreen=ndcToScreen(startNdc/startNdc.w);vec2 endScreen=ndcToScreen(endNdc/endNdc.w);float halfWidth=lineWidth*0.5+antialiasWidth;vec2 directionScreen=endScreen-startScreen;vec2 widthOffsetScreen=rotate90(normalize(directionScreen))*offsetDirection*halfWidth;vec2 position=startScreen+directionScreen*t+widthOffsetScreen;vDistanceFromAxis=length(widthOffsetScreen);\n#ifdef WORLDSPACE_DASH\nvDistanceAlong=length((end-start)*t);\n#else\nvDistanceAlong=length(directionScreen*t);\n#endif\nvec2 posNdc=screenToNdc(position);gl_Position=vec4(posNdc*w,z,w);}"}}]);